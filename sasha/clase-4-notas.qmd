---
title: "Notas de la clase 4"
author: "Aleksander Dietrichson"
format: html
editor: visual
---

## Manipular datos con dplyr

`dplyr` es parte de tidyverse.

```{r}
library(tidyverse)
```

### Obtenemos datos

Voy a usar los del indec:

```{r}
my_data <- readRDS("/cloud/project/data/datos_indec.rds")

```

### Seleccionar columnas

```{r}
temp_df <- my_data |> 
  select(REGION, ITF)
```

```{r}
temp_df
```

## Seleccionar filas

Con `filter`

```{r}
temp_df |> 
  filter(REGION == 1)
```

Igualdad es con `==` (double igual) cando hacés comparaciones.

simple igual `=` es lo mismo que `<-`

```{r}
#! eval: false
## Ejemplo
(1==1)
(1==2)
(1=1)
```

```{r}
#| eval: false
temp_df |> 
  filter(REGION = 1) # Da error
```

el uso de `!` en código. Significa negación

```{r}
(1==1)

!(1==1)
```

$$
\neg
$$

Entonces tenemos tambíen el `!=`

```{r}
(1 != 2)
(1 != 1)
```

```{r}
temp_df |> 
  filter(REGION != 1)

```

También funcionan los `<` `>`, también hay `<=` `>=`

```{r}
temp_df |> 
  filter(ITF > 100000)
```

```{r}
temp_df |> 
  filter(ITF > 1000000)
```

```{r}
temp_df |> 
  filter(ITF >= 1000000)
```

## Crear columnas nuevas

```{r}
temp_df |> 
  mutate(pais = "Argentina")
```

```{r}
temp_df
```

```{r}
temp_df <- temp_df |> 
  mutate(pais = "Argentina")
temp_df
```

```{r}
temp_df <- temp_df |> 
  rename("PAIS" = pais)
temp_df

```

```{r}
temp_df2 <- data.frame(a = 1, b =1)
temp_df2
```

```{r}
temp_df2 <- temp_df2 |> 
  rename("JORGE"=a)

temp_df2
```

```{r}
temp_df2 <- temp_df2 |> 
  rename("JORGE"=a)
```

```{r}
temp_df <- temp_df |> 
  rename("Ingreso" = ITF)
temp_df
```

## Crear etiquetas (labels)

Con `mutate + case_when`

```{r}
temp_df <- temp_df |> 
  mutate(REGION2 = 
           case_when(
             REGION == 1 ~ "AMBA",
             REGION != 1 ~ "Interior",
            .default = "No Encontrado"))
temp_df
```

```{r}
temp_df |> 
  group_by(REGION2) |> 
  summarize(
    Media = mean(Ingreso),
    Mediana = median(Ingreso)
  )
```

### Hipótesis

$$
H_0: \mu(AMBA)=\mu(Provincias)
\\
H_1: \mu(AMBA)>\mu(Provincias)
\\
H_2: \mu(AMBA)<\mu(Provincias)
$$

H~0~: El nivel de ingresos entre AMBA y el Interior es igual.

La hipótesis nula es...

Las alternativas son ....
